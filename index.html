<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>jlbun</title><meta name="description" content="Documentation for jlbun"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"/><script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js"></script><script>
					window.__typeDocPluginKatexOptions=undefined;
					window.addEventListener('load', () => window.renderMathInElement(document.body, window.__typeDocPluginKatexOptions));
				</script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">jlbun</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>jlbun</h1></div><div class="tsd-panel tsd-typography"><h1 id="jlbun-using-julia-in-bun" class="tsd-anchor-link">jlbun - Using Julia in Bun<a href="#jlbun-using-julia-in-bun" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><img src="https://user-images.githubusercontent.com/13583761/210193825-4b898ddf-b4b2-4e21-a691-c05240bb81e3.png" alt="Logo of jlbun"></p>
<ul>
<li><a href="#jlbun---using-julia-in-bun">jlbun - Using Julia in Bun</a>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#evaluate-julia-code">Evaluate Julia code</a></li>
<li><a href="#pass-a-bun-array-to-julia">Pass a Bun array to Julia</a></li>
<li><a href="#pass-a-julia-array-to-bun">Pass a Julia Array to Bun</a></li>
<li><a href="#do-some-linear-algebra">Do some linear algebra</a></li>
<li><a href="#install-and-use-new-packages">Install and use new packages</a></li>
<li><a href="#function-calls-with-keyword-arguments">Function calls with keyword arguments</a></li>
<li><a href="#call-js-functions-from-julia">Call JS functions from Julia</a></li>
<li><a href="#run-julia-with-multiple-threads">Run Julia with multiple threads</a></li>
</ul>
</li>
<li><a href="#star-history">Star History</a></li>
</ul>
</li>
</ul>
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><blockquote>
<ul>
<li>You need to have <code>Bun</code>, <code>CMake</code> and <code>Julia</code> installed to use this library.</li>
<li><strong>Currently only supports Julia &gt;=1.10</strong></li>
<li><code>bun install</code> does not run the packages's <code>install</code> scripts, so <code>npm install</code> is used instead.</li>
</ul>
</blockquote>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">jlbun</span>
</code><button type="button">Copy</button></pre>

<h2 id="usage" class="tsd-anchor-link">Usage<a href="#usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><h3 id="evaluate-julia-code" class="tsd-anchor-link">Evaluate Julia code<a href="#evaluate-julia-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>jlbun</code> provides <code>Julia.eval()</code> and <code>Julia.tagEval()</code>. The former accepts a string, while the latter accepts a tagged template literal.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">eval</span><span class="hl-1">(</span><span class="hl-2">&#39;println(&quot;Hello from Julia&quot;)&#39;</span><span class="hl-1">); </span><span class="hl-5">// &quot;Hello from Julia&quot;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">arr</span><span class="hl-1"> = [</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-2">&quot;hello&quot;</span><span class="hl-1">];</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">tagEval</span><span class="hl-2">`println(</span><span class="hl-6">${</span><span class="hl-4">arr</span><span class="hl-6">}</span><span class="hl-2">)`</span><span class="hl-1">; </span><span class="hl-5">// &quot;Any[1, 2, &quot;hello&quot;]&quot;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">arr2</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Uint8Array</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">3</span><span class="hl-1">]);</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">tagEval</span><span class="hl-2">`println(</span><span class="hl-6">${</span><span class="hl-4">arr2</span><span class="hl-6">}</span><span class="hl-2">)`</span><span class="hl-1">; </span><span class="hl-5">// &quot;UInt8[0x01, 0x02, 0x03]&quot;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">obj</span><span class="hl-1"> = { </span><span class="hl-4">foo:</span><span class="hl-1"> </span><span class="hl-8">0</span><span class="hl-1">, </span><span class="hl-4">bar:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">, </span><span class="hl-4">bal:</span><span class="hl-1"> [</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">3</span><span class="hl-1">] }</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">tagEval</span><span class="hl-2">`println(</span><span class="hl-6">${</span><span class="hl-4">obj</span><span class="hl-6">}</span><span class="hl-2">)`</span><span class="hl-1">; </span><span class="hl-5">// &quot;(foo = 0, bar = false, bal = Any[1, 2, 3])&quot;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="pass-a-bun-array-to-julia" class="tsd-anchor-link">Pass a Bun array to Julia<a href="#pass-a-bun-array-to-julia" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1">, </span><span class="hl-4">JuliaArray</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// This initializes Julia and loads prelude symbols.</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Create a `TypedArray` at the Bun side.</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bunArray</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Float64Array</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">3</span><span class="hl-1">, </span><span class="hl-8">4</span><span class="hl-1">, </span><span class="hl-8">5</span><span class="hl-1">]);</span><br/><br/><span class="hl-5">// Create a `JuliaArray` from the `TypedArray`.</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">juliaArray</span><span class="hl-1"> = </span><span class="hl-4">JuliaArray</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">bunArray</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// These two arrays now share the same memory.</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">println</span><span class="hl-1">(</span><span class="hl-4">juliaArray</span><span class="hl-1">); </span><span class="hl-5">// [1.0, 2.0, 3.0, 4.0, 5.0]</span><br/><br/><span class="hl-5">// We can modify the array at the Bun side (0-indexed).</span><br/><span class="hl-4">bunArray</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">] = </span><span class="hl-8">100.0</span><span class="hl-1">;</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">println</span><span class="hl-1">(</span><span class="hl-4">juliaArray</span><span class="hl-1">); </span><span class="hl-5">// [1.0, 100.0, 3.0, 4.0, 5.0]</span><br/><br/><span class="hl-5">// Or we can modify the array at the Julia side (also 0-indexed).</span><br/><span class="hl-4">juliaArray</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-8">0</span><span class="hl-1">, -</span><span class="hl-8">10.0</span><span class="hl-1">);</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">println</span><span class="hl-1">(</span><span class="hl-4">juliaArray</span><span class="hl-1">); </span><span class="hl-5">// [-10.0, 100.0, 3.0, 4.0, 5.0]</span><br/><br/><span class="hl-5">// This cleans up Julia-related stuff.</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="pass-a-julia-array-to-bun" class="tsd-anchor-link">Pass a Julia Array to Bun<a href="#pass-a-julia-array-to-bun" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">juliaArray</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">rand</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-8">10</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bunArray</span><span class="hl-1"> = </span><span class="hl-4">juliaArray</span><span class="hl-1">.</span><span class="hl-4">rawValue</span><span class="hl-1">;</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">bunArray</span><span class="hl-1">);</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="do-some-linear-algebra" class="tsd-anchor-link">Do some linear algebra<a href="#do-some-linear-algebra" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">juliaArray</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">rand</span><span class="hl-1">(</span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">inv</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">inv</span><span class="hl-1">(</span><span class="hl-4">juliaArray</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">inv</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1">);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">anotherJuliaArray</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">rand</span><span class="hl-1">(</span><span class="hl-8">2</span><span class="hl-1">, </span><span class="hl-8">2</span><span class="hl-1">);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">product</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">[</span><span class="hl-2">&quot;*&quot;</span><span class="hl-1">](</span><span class="hl-4">juliaArray</span><span class="hl-1">, </span><span class="hl-4">anotherJuliaArray</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">product</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// We can also import Julia modules.</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">LA</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">import</span><span class="hl-1">(</span><span class="hl-2">&quot;LinearAlgebra&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-7">LA</span><span class="hl-1">.</span><span class="hl-0">norm</span><span class="hl-1">(</span><span class="hl-4">product</span><span class="hl-1">).</span><span class="hl-4">value</span><span class="hl-1">);</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="install-and-use-new-packages" class="tsd-anchor-link">Install and use new packages<a href="#install-and-use-new-packages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">join</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;path&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-5">// Install `CairoMakie`</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Pkg</span><span class="hl-1">.</span><span class="hl-0">add</span><span class="hl-1">(</span><span class="hl-2">&quot;CairoMakie&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Import `CairoMakie`</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">Cairo</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">import</span><span class="hl-1">(</span><span class="hl-2">&quot;CairoMakie&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Plot and save</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">plt</span><span class="hl-1"> = </span><span class="hl-4">Cairo</span><span class="hl-1">.</span><span class="hl-0">plot</span><span class="hl-1">(</span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">rand</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">), </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-0">rand</span><span class="hl-1">(</span><span class="hl-8">10</span><span class="hl-1">));</span><br/><span class="hl-4">Cairo</span><span class="hl-1">.</span><span class="hl-0">save</span><span class="hl-1">(</span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-4">process</span><span class="hl-1">.</span><span class="hl-0">cwd</span><span class="hl-1">(), </span><span class="hl-2">&quot;plot.png&quot;</span><span class="hl-1">), </span><span class="hl-4">plt</span><span class="hl-1">);</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="function-calls-with-keyword-arguments" class="tsd-anchor-link">Function calls with keyword arguments<a href="#function-calls-with-keyword-arguments" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1">, </span><span class="hl-4">JuliaArray</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rawArray</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Int32Array</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-8">20</span><span class="hl-1">, </span><span class="hl-8">30</span><span class="hl-1">, </span><span class="hl-8">100</span><span class="hl-1">]);</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">arr</span><span class="hl-1"> = </span><span class="hl-4">JuliaArray</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">rawArray</span><span class="hl-1">);</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">[</span><span class="hl-2">&quot;sort!&quot;</span><span class="hl-1">].</span><span class="hl-0">callWithKwargs</span><span class="hl-1">({ </span><span class="hl-4">by:</span><span class="hl-1"> </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">.</span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">rev:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }, </span><span class="hl-4">arr</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">rawArray</span><span class="hl-1">); </span><span class="hl-5">// Int32Array(5) [ 30, 20, 100, 10, 1 ]</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="call-js-functions-from-julia" class="tsd-anchor-link">Call JS functions from Julia<a href="#call-js-functions-from-julia" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1">, </span><span class="hl-4">JuliaArray</span><span class="hl-1">, </span><span class="hl-4">JuliaFunction</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">jsFunc</span><span class="hl-1"> = (</span><span class="hl-4">x</span><span class="hl-1">: </span><span class="hl-9">number</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> -</span><span class="hl-4">x</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cb</span><span class="hl-1"> = </span><span class="hl-4">JuliaFunction</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">jsFunc</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">returns:</span><span class="hl-1"> </span><span class="hl-2">&quot;i32&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> [</span><span class="hl-2">&quot;i32&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">arr</span><span class="hl-1"> = </span><span class="hl-4">JuliaArray</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Int32Array</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-8">20</span><span class="hl-1">, </span><span class="hl-8">30</span><span class="hl-1">, </span><span class="hl-8">100</span><span class="hl-1">]));</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">neg</span><span class="hl-1"> = </span><span class="hl-4">arr</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-4">cb</span><span class="hl-1">);</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">println</span><span class="hl-1">(</span><span class="hl-4">neg</span><span class="hl-1">); </span><span class="hl-5">// Int32[-1, -10, -20, -30, -100]</span><br/><span class="hl-4">cb</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>To deal with strings requires some tricks, see the example below:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1">, </span><span class="hl-4">JuliaArray</span><span class="hl-1">, </span><span class="hl-4">JuliaFunction</span><span class="hl-1">, </span><span class="hl-4">safeCString</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">jsFunc</span><span class="hl-1"> = (</span><span class="hl-4">x</span><span class="hl-1">: </span><span class="hl-9">number</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">safeCString</span><span class="hl-1">(</span><span class="hl-4">x</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">());</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cb</span><span class="hl-1"> = </span><span class="hl-4">JuliaFunction</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">jsFunc</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">returns:</span><span class="hl-1"> </span><span class="hl-2">&quot;cstring&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">args:</span><span class="hl-1"> [</span><span class="hl-2">&quot;i32&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">arr</span><span class="hl-1"> = </span><span class="hl-4">JuliaArray</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Int32Array</span><span class="hl-1">([</span><span class="hl-8">1</span><span class="hl-1">, </span><span class="hl-8">10</span><span class="hl-1">, </span><span class="hl-8">20</span><span class="hl-1">, </span><span class="hl-8">30</span><span class="hl-1">, </span><span class="hl-8">100</span><span class="hl-1">]));</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">Base</span><span class="hl-1">[</span><span class="hl-2">&quot;sort!&quot;</span><span class="hl-1">].</span><span class="hl-0">callWithKwargs</span><span class="hl-1">({ </span><span class="hl-4">by:</span><span class="hl-1"> </span><span class="hl-4">cb</span><span class="hl-1">, </span><span class="hl-4">rev:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }, </span><span class="hl-4">arr</span><span class="hl-1">);</span><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">println</span><span class="hl-1">(</span><span class="hl-4">arr</span><span class="hl-1">); </span><span class="hl-5">// Int32[30, 20, 100, 10, 1]</span><br/><span class="hl-4">cb</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h3 id="run-julia-with-multiple-threads" class="tsd-anchor-link">Run Julia with multiple threads<a href="#run-julia-with-multiple-threads" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To use multiple threads in Julia, you need to set the <code>JULIA_NUM_THREADS</code> environment variable.</p>
<p>With <code>export JULIA_NUM_THREADS=2</code> set, the following program should output <code>2</code> instead of <code>1</code>:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">eval</span><span class="hl-1">(</span><span class="hl-2">&quot;println(Threads.nthreads())&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>A more advanced example:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Julia</span><span class="hl-1">, </span><span class="hl-4">JuliaFunction</span><span class="hl-1">, </span><span class="hl-4">JuliaTask</span><span class="hl-1">, </span><span class="hl-4">JuliaValue</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;jlbun&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">init</span><span class="hl-1">();</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">promises</span><span class="hl-1">: </span><span class="hl-9">Promise</span><span class="hl-1">&lt;</span><span class="hl-9">JuliaValue</span><span class="hl-1">&gt;[] = [];</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">func</span><span class="hl-1"> = </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">eval</span><span class="hl-1">(</span><span class="hl-2">`function ()</span><br/><span class="hl-2">  ans = 0;</span><br/><span class="hl-2">  for i in 1:1000</span><br/><span class="hl-2">    ans += i</span><br/><span class="hl-2">  end</span><br/><span class="hl-2">  ans</span><br/><span class="hl-2">end</span><br/><span class="hl-2">`</span><span class="hl-1">) </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-9">JuliaFunction</span><span class="hl-1">;</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-4">i</span><span class="hl-1"> = </span><span class="hl-8">0</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1"> &lt; </span><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-4">nthreads</span><span class="hl-1">; </span><span class="hl-4">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">  </span><span class="hl-4">promises</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-4">JuliaTask</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">func</span><span class="hl-1">).</span><span class="hl-0">schedule</span><span class="hl-1">(</span><span class="hl-4">i</span><span class="hl-1">).</span><span class="hl-4">value</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = (</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-9">Promise</span><span class="hl-1">.</span><span class="hl-0">all</span><span class="hl-1">(</span><span class="hl-4">promises</span><span class="hl-1">)).</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-4">promise</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">promise</span><span class="hl-1">.</span><span class="hl-4">value</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">results</span><span class="hl-1">); </span><span class="hl-5">// [ 500500n, 500500n, 500500n, 500500n, 500500n, 500500n, 500500n, 500500n ]</span><br/><br/><span class="hl-4">Julia</span><span class="hl-1">.</span><span class="hl-0">close</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<h2 id="star-history" class="tsd-anchor-link">Star History<a href="#star-history" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://star-history.com/#lucifer1004/jlbun&amp;Date"><img src="https://api.star-history.com/svg?repos=lucifer1004/jlbun&amp;type=Date" alt="Star History Chart"></a></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#jlbun-using-julia-in-bun"><span>jlbun -<wbr/> <wbr/>Using <wbr/>Julia in <wbr/>Bun</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#usage"><span>Usage</span></a></li><li><ul><li><a href="#evaluate-julia-code"><span>Evaluate <wbr/>Julia code</span></a></li><li><a href="#pass-a-bun-array-to-julia"><span>Pass a <wbr/>Bun array to <wbr/>Julia</span></a></li><li><a href="#pass-a-julia-array-to-bun"><span>Pass a <wbr/>Julia <wbr/>Array to <wbr/>Bun</span></a></li><li><a href="#do-some-linear-algebra"><span>Do some linear algebra</span></a></li><li><a href="#install-and-use-new-packages"><span>Install and use new packages</span></a></li><li><a href="#function-calls-with-keyword-arguments"><span>Function calls with keyword arguments</span></a></li><li><a href="#call-js-functions-from-julia"><span>Call <wbr/>JS functions from <wbr/>Julia</span></a></li><li><a href="#run-julia-with-multiple-threads"><span>Run <wbr/>Julia with multiple threads</span></a></li></ul></li><li><a href="#star-history"><span>Star <wbr/>History</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">jlbun</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
